# -*- coding: utf-8 -*-
"""Untitled9.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/14ef0fU0K3nbmX8nx88-3nXu8PyjwN4_s
"""

import streamlit as st
import zipfile
import io
import random
import requests
import unicodedata
import re

def generate_hint(answer: str) -> str:
    if not answer:
        return ""
    first = answer[0]
    masked = ""
    for char in answer[1:]:
        if char.isalpha() or ('ã' <= char <= 'ã‚“') or ('ã‚¡' <= char <= 'ãƒ³') or ('ä¸€' <= char <= 'é¾¥'):
            masked += "ã€‡"
        elif char == " ":
            masked += "â–¡"
        else:
            masked += char
    return f"{first}{masked}ï¼ˆå…¨{len(answer)}æ–‡å­—ï¼‰"

def normalize(text: str) -> str:
    return unicodedata.normalize("NFKC", text).lower().replace(" ", "").replace("ã€€", "")

def extract_answer(filename: str) -> str:
    name = filename.rsplit("/", 1)[-1].rsplit(".", 1)[0]
    parts = name.split("_", 1)
    return parts[1] if len(parts) == 2 else parts[0]

def init_session():
    defaults = {
        "questions": [],
        "current_q": 0,
        "score": 0,
        "zip_data": None,
        "played": False,
        "answered": False,
    }
    for key, val in defaults.items():
        if key not in st.session_state:
            st.session_state[key] = val

init_session()

st.title("ğŸ® ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¤œå®šæ¥½æ›²ç·¨ï¼ˆDropboxãƒªãƒ³ã‚¯å¼ï¼‰")
st.markdown("""
#### ğŸ“ èª¬æ˜
- æ›²ã®ä¸€éƒ¨ãŒæµã‚Œã¾ã™ã€‚
- **